library(sudeaseg)
hello()
library(sudeaseg)
?devtools::use_data
library(devtools)
ifm <- read.csv(file.choose())
ifm %>% head()
library(dplyr)
ifm %<>% tbl_df()
library(magrittr)
ifm %<>% tbl_df()
ifm
use_data(ifm)
library(sudeaseg)
ls()
rm(ifm)
library(sudeaseg)
ifm
gc()
gc(reset = TRUE)
ifm
gc()
ifm
ifm %>% primas() %>% filter(ano == 2014, mes == 12) %>% ranking_primas()
ifm %>% primas()
ifm
primas()
library(sudeaseg)
gc()
ls()
ifm
gc()
gc(reset = TRUE)
ifm
ifm %>% primas() %>% filter(ano == 2014, mes == 12) %>% ranking_primas()
library(ggvis)
ifm %>% primas() %>% filter(ano == 2014, mes == 12) %>% ranking_primas() %>% ggvis(x = ~empresa, y = ~primas_netas, fill = ~area_seguros) %>% layer_bars()
ifm %>% primas() %>% filter(ano == 2014, mes == 12) %>% ranking_primas()
ifm %>% primas() %>% filter(ano == 2014, mes == 12) %>% ranking_primas() %>% lapply(class())
ifm %>% primas() %>% filter(ano == 2014, mes == 12) %>% ranking_primas() %>% lapply(class)
ranking <- ifm %>% primas() %>% filter(ano == 2014, mes == 12) %>% ranking_primas()
levels(ranking$empresa)
library(sudeaseg)
ifm %>% primas() %>% filter(ano == 2014, mes == 12) %>% ranking_primas() %>% ggvis(x = ~empresa, y = ~primas_netas, fill = ~area_seguros) %>% layer_bars()
ifm %>% primas() %>% filter(ano == 2014, mes == 12) %>% ranking_primas()
library(ggplot2)
ifm %>% primas() %>% filter(ano == 2014, mes == 12) %>% ranking_primas() %>% ggplot(aes(x = empresa, y = primas_netas, fill = area_seguros)) + geom_bar(stat = 'identity')
library(sudeaseg)
devtools::load_all(".")
library(sudeaseg)
ifm
ifm <- ifm %>% filter(ano %in% 2013:2015)
gc()
gc(reset = TRUE)
ls()
use_data(ifm)
use_data(ifm, overwrite = TRUE)
ifm <- ifm %>% filter(ano %in% 2014:2015)
use_data(ifm, overwrite = TRUE)
ifm
ifm %>% head(100) %>% View()
ifm %>% nrow()
ifm %>% filter(nivel <= 2) %>% nrow()
ifm %>% filter(!is.na(tipo_monto)) %>% nrow()
ifm %>% filter(!is.na(tipo_monto))
ifm %>% filter(!is.na(tipo_monto)) %>% head(100) %>% View()
ifm %<>% filter(!is.na(tipo_monto)) %>% head(100) %>% View()
ifm %<>% filter(!is.na(tipo_monto)) %>% head(100)
rm(ifm)
ifm %<>% filter(!is.na(tipo_monto)) %>% head(100)
ifm
rm(ifm)
ifm %<>% filter(!is.na(tipo_monto))
ifm
use_data(ifm, overwrite = TRUE)
rm(ifm)
rm(list = ls(all = TRUE))
gc(reset = TRUE)
gc(reset = TRUE)
ifm
library(sudeaseg)
ifm
gc(+)
gc()
ifm %>% primas(2015, 12) %>% ranking_global()
ifm %>% primas(2015, 12) %>% ranking_areas()
library(sudeaseg)
ifm %>% primas(2015, 12) %>% ranking_areas()
library(sudeaseg)
ifm %>% primas(2015, 12) %>% ranking_areas()
library(sudeaseg)
ifm %>% primas(2015, 12) %>% ranking_areas()
ifm %>% comisiones(2015, 12) %>% ranking_areas()
ifm %>% siniestros_pagados(2015, 12) %>% ranking_areas()
ifm %>% comisiones(2015, 12) %>% ranking_global() %>% ggvis(x = ~empresa, y = ~monto)
library(sudeaseg)
ifm %>% comisiones(2015, 12) %>% ranking_global() %>% ggvis(x = ~empresa, y = ~monto)
ifm %>% comisiones(2015, 12) %>% ranking_areas() %>% ggvis(x = ~empresa, y = ~monto, fill = ~area_seguros)
ifm %>% comisiones(2015, 12)
ifm$mes %>% class()
ifm$ano %>% class()
ifm %>% comisiones(2015, 12)
ifm %>% comisiones(2015, 12) %>% select(codigo_cuenta, cuenta, tipo_monto)
ifm %>% comisiones(2015, 12)
ifm %>% filter(tipo_monto == 'Comisiones', ano == 2015, mes == 12)
ifm
ifm %>% select(ano) %>% distinct()
ifm
ifm %>% primas(2015, 12)
ifm <- read.csv(file.choose())
ifm %<>% tbl_df()
ifm
ifm %>% filter(ano %in% 2014:2015)
ifm %>% filter(ano %in% 2014:2015) %>% filter(!is.na(tipo_monto))
ifm %<>% filter(ano %in% 2014:2015) %>% filter(!is.na(tipo_monto))
use_data(ifm)
use_data(ifm, overwrite = TRUE)
ifm
library(sudeaseg)
ifm
ifm %>% comisiones(2015, 12)
ifm %>% filter(tipo_monto = 'Comisiones')
ifm %>% filter(tipo_monto == 'Comisiones')
?filter
library(sudeaseg)
ifm %>% comisiones(2015, 12)
ifm %>% comisiones(2015, 11)
ifm %>% comisiones(2015, 11) %>% ranking_global()
ifm %>% primas(2015, 11) %>% ranking_global()
ifm %>% primas(2014, 12) %>% ranking_global()
codigo_contable <- read.csv2(file.choose())
codigo_contable
codigo_contable %<>% tbl_df()
codigo_contable
library(sudeaseg)
ifm %>% primas(2014, 12)
ifm %>% primas(2014, 12) %>% select(nivel) %>% distinct()
ifm %>% primas(2015, 12) %>% select(nivel) %>% distinct()
ifm %>% primas(2015, 11) %>% select(nivel) %>% distinct()
ifm %>% primas(2003, 11) %>% select(nivel) %>% distinct()
library(sudeaseg)
library(sudeaseg)
library(sudeaseg)
library(sudeaseg)
codigo_contable <- read.csv2(file.choose())
codigo_contable
codigo_contable %<>% tbl_df()
library(magrittr)
codigo_contable %<>% tbl_df()
library(dplyr)
codigo_contable %<>% tbl_df()
codigo_contable
use_data(codigo_contable)
library(devtools)
use_data(codigo_contable)
empresas <- read.csv2(file.choose())
empresas
empresas %<>% tbl_df()
use_data(empresas)
empresas
codigo_contable
ifm
ifm %>% select(codigo_cuenta) %>% distinct()
codigo_contable
clasificar_cuentas(codigo_contable)
library(sudeaseg)
consolidar_ifm(ifm, codigo_contable, empresas)
ifm
ifm <- cargar_directorio('C:\\Users\\Elwilton\\Google Drive\\infoSeguros\\sudeaseg\\data\\txt')
class(ifm)
ifm
ifm %>% filter(ano %in% 2014:2015)
ifm %>% filter(ano %in% 2014:2015, monto_total != 0)
ifm %>% filter(ano %in% 2014:2015)
ifm_total <- ifm
ifm %<>% filter(ano %in% 2014:2015)
ifm
use_data(ifm, overwrite = TRUE)
ifm
library(sudeaseg)
rm(list = ls(all = TRUE))
gc(reset = TRUE)
ifm
gc()
ifm
consolidar_ifm(ifm, codigo_contable, empresas)
ifm
class(ifm$codigo_cuenta)
class(codigo_contable$codigo_cuenta)
codigo_contable <- read.csv2(file.choose(), colClasses = 'character')
use_data(codigo_contable)
use_data(codigo_contable, overwrite = TRUE)
rm(list = ls(all = TRUE))
library(sudeaseg)
consolidar_ifm(ifm, codigo_contable, empresas)
empresa$codigo_empresa %>% class()
empresas$codigo_empresa %>% class()
empresas
empresas %<>% mutate(codigo_empresa = as.character(codigo_empresa))
consolidar_ifm(ifm, codigo_contable, empresas)
empresas
empresas %<>% mutate(empresa = as.character(empresa))
empresas %<>% mutate(empresa_largo = as.character(empresa_largo))
use_data(empresas)
use_data(empresas, overwrite = TRUE)
rm(list = ls(all = TRUE))
library(sudeaseg)
consolidar_ifm(ifm, codigo_contable, empresas)
consolidar_ifm(ifm, codigo_contable, empresas) %>% primas(2014, 12) %>% ranking_global()
gc()
gc(reset = TRUE)
codigos_primas_cobradas <- c('50101', '52101', '53101', '54101', '54102')
codigos_primas_devueltas <- c('30103', '32102', '33102', '34102')
codigos_primas <- c(codigos_primas_cobradas ,codigos_primas_devueltas)
codigos_primas_personas <- c('50101', '30103')
codigos_primas_solidarios <- c('52101', '32102')
codigos_primas_generales <- c('53101', '33102')
codigos_primas_reaseguros <- c('54101', '54102', '34102')
codigos_siniestros_pagados <- c('30101', '30102', '32101', '33101', '34101')
codigos_comisiones <- c('30104', '32103', '33103', '34103')
use_data(
codigos_primas_cobradas,
codigos_primas_devueltas,
codigos_primas,
codigos_primas_personas,
codigos_primas_solidarios,
codigos_primas_generales,
codigos_primas_reaseguros,
codigos_siniestros_pagados,
codigos_comisiones,
internal = TRUE
)
codigos_primas_cobradas <- c('50101', '52101', '53101', '54101', '54102')
codigos_primas_devueltas <- c('30103', '32102', '33102', '34102')
codigos_primas <- c(codigos_primas_cobradas ,codigos_primas_devueltas)
codigos_primas_personas <- c('50101', '30103')
codigos_primas_solidarios <- c('52101', '32102')
codigos_primas_generales <- c('53101', '33102')
codigos_primas_reaseguros <- c('54101', '54102', '34102')
codigos_siniestros_pagados <- c('30101', '30102', '32101', '33101', '34101')
codigos_comisiones <- c('30104', '32103', '33103', '34103')
use_data(
codigos_primas_cobradas,
codigos_primas_devueltas,
codigos_primas,
codigos_primas_personas,
codigos_primas_solidarios,
codigos_primas_generales,
codigos_primas_reaseguros,
codigos_siniestros_pagados,
codigos_comisiones,
internal = TRUE
)
codigos_primas_cobradas <- c('50101', '52101', '53101', '54101', '54102')
codigos_primas_devueltas <- c('30103', '32102', '33102', '34102')
codigos_primas <- c(codigos_primas_cobradas ,codigos_primas_devueltas)
codigos_primas_personas <- c('50101', '30103')
codigos_primas_solidarios <- c('52101', '32102')
codigos_primas_generales <- c('53101', '33102')
codigos_primas_reaseguros <- c('54101', '54102', '34102')
codigos_siniestros_pagados <- c('30101', '30102', '32101', '33101', '34101')
codigos_comisiones <- c('30104', '32103', '33103', '34103')
use_data(
codigos_primas_cobradas,
codigos_primas_devueltas,
codigos_primas,
codigos_primas_personas,
codigos_primas_solidarios,
codigos_primas_generales,
codigos_primas_reaseguros,
codigos_siniestros_pagados,
codigos_comisiones,
internal = TRUE,
overwrite = TRUE
)
library(sudeaseg)
codigo_contable
clasificar_cuentas(codigo_contable)
rm(list = ls(all = TRUE))
gc(reset = TRUE)
library(sudeaseg)
library(sudeaseg)
codigos_comisiones
library(sudeaseg)
ifm
library(dplyr)
ifm
ifm %>% primas() %>% serie()
ifm <- consolidar_ifm(ifm, codigo_contable, empresas)
ifm %>% primas() %>% serie()
ifm %>% primas() %>% group_by(ano) %>% filter(mes == max(mes)) %>% serie()
ifm %>% filter(mes == 12, ano == 2014, tipo_monto == 'Primas') %>% summarise(sum(monto_neto))
gc()
gc(reset = TRUE)
ifm %>% filter(mes == 12, ano == 2014, tipo_monto == 'Primas') %>% summarise(sum(monto_neto))
ifm %>% primas() %>% group_by(ano) %>% filter(mes == max(mes)) %>% serie()
ifm %>% primas() %>% group_by(ano) %>% filter(mes == 12) %>% serie()
checkRdaFiles()
library(devtools)
checkRdaFiles()
tools::checkRdaFiles()
tools::checkRdaFiles('data')
?use_data
?desc
?importFrom
?devtools::importFrom
?tools::importFrom
library(sudeaseg)
library(sudeaseg)
ifm %>% primas() %>% serie()
ifm %>% primas() %>% serie() %>% ggvis(x = ~fecha, y = monto)
library(ggvis)
ifm %>% primas() %>% serie() %>% ggvis(x = ~fecha, y = monto)
ifm %>% primas() %>% serie() %>% ggvis(x = ~fecha, y = ~monto)
ifm %>% primas() %>% serie() %>% ggvis(x = ~fecha, y = ~monto) %>% layer_lines() %>% layer_points()
ifm %>% primas() %>% serie() %>% ggvis(x = ~fecha, y = ~monto) %>% layer_lines() %>% layer_points() %>% add_tooltip()
ifm %>% primas() %>% serie() %>% ggplot(aes(x = fecha, y = monto)) + geom_line() + geom_point()
libray(ggplot2)
library(ggplot2)
ifm %>% primas() %>% serie() %>% ggplot(aes(x = fecha, y = monto)) + geom_line() + geom_point()
12 * 70000 + 12 * 1320 + 500000
12 * 70000 + 12 * 1320 + 500000 * 3
6000000000 * .4 * .01
6000000000 * .4 * .001
